FROM ubuntu:latest
ENV DEBIAN_FRONTEND noninteractive
RUN apt update && apt install gcc musl-dev ucspi-tcp -y
ADD *.c /app/
ADD *.sh /app/  
ADD password.txt /app
ADD flag.txt /app
WORKDIR /app
RUN ["./setup.sh"]
RUN chmod -R 755 .
RUN adduser --disabled-password user
USER user
ENV PORT=8080
CMD ["./startup.sh"]
