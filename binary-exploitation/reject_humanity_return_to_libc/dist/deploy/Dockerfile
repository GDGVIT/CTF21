FROM ubuntu:latest
ENV DEBIAN_FRONTEND noninteractive
RUN apt update && apt install gcc musl-dev socat -y
WORKDIR /app
COPY . .  
RUN gcc -ggdb -fno-stack-protector -z execstack -no-pie -o challenge dispenser_login.c
RUN chmod -R 755 .
RUN adduser --disabled-password --no-create-home user
USER user
ENV PORT=8080
CMD ["./startup.sh"]
