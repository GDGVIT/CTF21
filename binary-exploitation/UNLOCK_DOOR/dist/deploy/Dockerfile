FROM ubuntu:latest
ENV DEBIAN_FRONTEND noninteractive
RUN apt update && apt install gcc musl-dev ucspi-tcp -y
WORKDIR /app
COPY . .  
RUN gcc -ggdb  -fno-stack-protector -z execstack -static -o challenge record_keeper.c
RUN chmod -R 755 .
RUN adduser --disabled-password --no-create-home user
USER user
ENV PORT=8080
CMD ["./startup.sh"]
